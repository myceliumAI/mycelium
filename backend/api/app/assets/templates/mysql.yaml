name: "MySQL Database"
description: "Template for MySQL database connections"
tabs:
  info:
    label: "Information"
    description: "Basic information about the data contract"
    fields:
      - name: "title"
        label: "Title"
        type: "text"
        required: true
        placeholder: "My MySQL Data Contract"
        hint: "A descriptive name for this data contract"
      
      - name: "source_name"
        label: "Source Name"
        type: "text"
        required: true
        placeholder: "my_source"
        hint: "Unique identifier for this data source (e.g. sales_data, customer_feed)"
      
      - name: "version"
        label: "Version"
        type: "text"
        required: true
        pattern: "^\\d+\\.\\d+\\.\\d+$"
        placeholder: "1.0.0"
        hint: "Semantic version (e.g. 1.0.0)"
      
      - name: "description"
        label: "Description"
        type: "textarea"
        required: true
        rows: 4
        hint: "Detailed description of this data contract"

      - name: "bu_id"
        label: "Business Unit ID"
        type: "text"
        required: true
        placeholder: "bi"
        hint: "Business unit identifier for workflow monitoring (e.g. bi, hofi, indus)"

  server:
    label: "Server"
    description: "Database connection details"
    fields:
      - name: "host"
        label: "Host"
        type: "text"
        required: true
        placeholder: "localhost"
        hint: "Database server hostname or IP address"

      - name: "port"
        label: "Port"
        type: "number"
        required: true
        default: 3306
        min: 1
        max: 65535
        hint: "Database server port (default: 3306)"

      - name: "database"
        label: "Database Name"
        type: "text"
        required: true
        hint: "Name of the database to connect to"

      - name: "username"
        label: "Username"
        type: "text"
        required: true
        hint: "Database user account"

      - name: "password"
        label: "Password"
        type: "password"
        required: true
        hint: "Database user password"

  schema:
    label: "Schema"
    description: "Configuration for data extraction"
    fields:
      - name: "target_table"
        label: "Target Table"
        type: "text"
        required: true
        placeholder: "table_name"
        hint: "Name of the destination table in Bigquery (e.g. my_table)"

      - name: "asserts"
        label: "Data Assertions"
        type: "array"
        required: false
        hint: "Define data quality checks"
        items:
          type: "object"
          properties:
            - name: "name"
              label: "Assert Name"
              type: "text"
              required: true
              hint: "Name of the assertion"
            
            - name: "assert_query"
              label: "Assert Query"
              type: "textarea"
              required: true
              rows: 4
              placeholder: "ASSERT (\n  SELECT COUNT(*) > 0\n  FROM {{ table_fq }}\n) AS 'Table must not be empty'"
              hint: "SQL query that must return true for valid data. Use {{ table_fq }} for the fully qualified table name"
            
            - name: "severity"
              label: "Severity"
              type: "select"
              required: false
              default: "ERROR"
              options:
                - "ERROR"
                - "WARNING"
              hint: "How to handle assertion failures"